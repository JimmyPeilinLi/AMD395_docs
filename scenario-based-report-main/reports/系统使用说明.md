# 技术方案报告生成系统使用说明

## 1. 系统概述

本系统通过 Claude Code 辅助生成技术方案文档，实现高效的文档编写和迭代流程。

### 1.1 工作流程

```
┌───────────────────────────────────────────────────────────┐
│                       文档工作流程                          │
└───────────────────────────────────────────────────────────┘

  ┌────────────┐      ┌────────────┐      ┌────────────┐
  │    用户 +   │      │    脚本     │      │    用户     │
  │ Claude Code │ ───> │  生成 PDF  │ ───> │  审阅批注   │
  │   编写 MD   │      │            │      │            │
  └────────────┘      └────────────┘      └────────────┘
         ^                                       │
         │                                       │
         │            ┌────────────┐             │
         └─────────── │ Claude Code │ <──────────┘
                      │  应用修改   │
                      └────────────┘
```

**核心思路**：
1. 用户通过 Claude Code 生成 Markdown 文档
2. 使用脚本将 Markdown 转换为格式化的 PDF
3. 用户在 PDF 上进行批注审阅
4. 将批注后的 PDF 反馈给 Claude Code，自动应用修改
5. 循环迭代，直到文档满意

### 1.2 目录结构

```
项目根目录/
├── reports/           # 报告目录
│   ├── <项目名>/
│   │   ├── internal/  # 内部版报告
│   │   ├── external/  # 外部版报告
│   │   └── data/      # 原始数据
├── scripts/           # 工具脚本
├── .templates/        # PDF 模板和样式
└── .claude/skills/    # Claude Code 技能
```

---

## 2. Claude Code 使用

本项目配置了 Claude Code 环境，在项目目录下启动 Claude Code 即可使用预设的技能。

### 2.1 可用技能

| 技能命令 | 功能描述 |
|----------|----------|
| `/tech-report` | 生成基于场景的技术方案报告 |

### 2.2 /tech-report 技能

启动报告生成向导，适用于以下场景：
- 整理技术方案、撰写技术报告
- 对比方案优劣势
- 准备售前材料、客户交付文档
- 推理框架性能评估（TTFT、TPOT、并发、吞吐量）

**使用方式**：在 Claude Code 中输入 `/tech-report`，系统会引导完成：
1. 场景信息收集
2. 评估维度定义
3. 测试数据整理
4. 报告生成（支持内部版/外部版）

### 2.3 示例 Prompt

以下是常用的交互示例：

**生成新报告**
```
帮我生成一个昇腾 910B 部署 DeepSeek-R1-671B 的技术方案报告
```

```
/tech-report
```

```
整理一下我们在 H100 上测试 Qwen2-72B 的性能数据，生成对比报告
```

**处理 PDF 批注**
```
我对 reports/xxx.pdf 做了批注，请查看并更改
```

```
查看 reports/技术方案-20260112.pdf 的批注，根据批注修改文档
```

```
PDF 有批注，帮我处理一下：reports/external/方案.pdf
```

**重新生成 PDF**
```
把 reports/xxx/README.md 重新生成 PDF
```

```
生成 PDF，文件名用"昇腾910B-DeepSeek-技术方案-20260112"
```

---

## 3. 工具使用指南

### 3.1 生成 PDF

将 Markdown 文档转换为 PDF 文件。

```bash
# 基本用法 - 自动命名
./scripts/generate-pdf.sh <Markdown文件路径>

# 指定输出文件名（{date} 自动替换为当前日期）
./scripts/generate-pdf.sh --name '昇腾910B-方案-{date}' report.md

# 批量生成目录下所有 md 文件
./scripts/generate-pdf.sh reports/xxx/external/
```

**PDF 命名规范**：`[硬件平台]-[模型/项目名称]-[文档类型]-[版本标识]-[日期].pdf`

示例：
- 内部版：`昇腾910B-DeepSeek-R1-671B-技术方案-内部版-20260112.pdf`
- 外部版：`昇腾910B-DeepSeek-R1-671B-技术方案-20260112.pdf`

### 3.2 PDF 批注与修改

生成 PDF 后，使用常用的 PDF 阅读器（如 Preview、Adobe Acrobat、PDF Expert 等）添加批注。

**批注方式**：
- 高亮需要修改的文本
- 添加批注说明修改意见

**反馈给 Claude Code**：
将批注后的 PDF 文件路径告诉 Claude Code，它会自动调用批注提取脚本，读取批注内容并应用修改到 Markdown 源文件。

```
用户：我对 reports/xxx.pdf 做了批注，请更改
Claude Code：[自动提取批注并修改 Markdown 文件]
```

---

## 4. 常见问题

### Q1: 如何添加公司 Logo？

在 Markdown 文件开头添加：

```markdown
<div style="text-align: center; margin-bottom: 30px;">
  <img src="../.templates/logo.png" alt="Logo" height="60">
</div>
```

### Q2: 如何自定义 PDF 样式？

编辑 `.templates/style.css` 文件，可自定义字体、颜色、表格样式等。

### Q3: 环境依赖如何安装？

```bash
# PDF 生成依赖
npm install -g md-to-pdf

# PDF 批注处理依赖
pip install pymupdf
```

---

*文档版本：v1.1 | 更新日期：2026-01-12*
